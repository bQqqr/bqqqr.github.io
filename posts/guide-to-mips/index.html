<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta http-equiv=content-security-policy content="upgrade-insecure-requests; block-all-mixed-content; default-src 'self'; child-src 'self'; font-src 'self' https://fonts.gstatic.com https://cdn.jsdelivr.net/; form-action 'self'; frame-src 'self'; img-src 'self'; object-src 'none'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com/ https://cdn.jsdelivr.net/; script-src 'self' 'unsafe-inline' https://www.google-analytics.com https://cdn.jsdelivr.net/; prefetch-src 'self'; connect-src 'self' https://www.google-analytics.com;"><meta name=author content="Christos Kaltsas"><meta name=description content="A dive into MIPS core concepts."><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="A Guide To MIPS"><meta name=twitter:description content="A dive into MIPS core concepts."><meta property="og:title" content="A Guide To MIPS"><meta property="og:description" content="A dive into MIPS core concepts."><meta property="og:type" content="article"><meta property="og:url" content="https://bqqqr.github.io/posts/guide-to-mips/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-06-08T00:00:00+00:00"><meta property="article:modified_time" content="2022-06-08T00:00:00+00:00"><title>Christos Kaltsas's Webpage</title><link rel=canonical href=https://bqqqr.github.io/posts/guide-to-mips/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.6b1a4fbc48955b72aea7913e43fabeb45e8bc120da5aa41b598dd33adcac4b59.css integrity="sha256-axpPvEiVW3Kup5E+Q/q+tF6LwSDaWqQbWY3TOtysS1k=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.39e41a7f16bdf8cb16e43cae7d714fa1016f1d2d2898a5b3f27f42c9979204e2.css integrity="sha256-OeQafxa9+MsW5DyufXFPoQFvHS0omKWz8n9CyZeSBOI=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicon.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5><meta name=generator content="Hugo 0.100.2"></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Christos Kaltsas's Webpage</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/contact/>Contact</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Posts</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://bqqqr.github.io/posts/guide-to-mips/>A Guide To MIPS</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2022-06-08T00:00:00Z>June 8, 2022</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
6-minute read</span></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/guide/>guide</a></span>
<span class=separator>‚Ä¢</span>
<span class=tag><a href=/tags/assembly/>assembly</a></span>
<span class=separator>‚Ä¢</span>
<span class=tag><a href=/tags/mips/>mips</a></span></div></div></header><div><h1 id=-mips>ü§ñ MIPS
<a class=heading-link href=#-mips><i class="fa fa-link" aria-hidden=true></i></a></h1><div class="notice note"><div class=notice-title><i class="fa fa-sticky-note" aria-hidden=true></i>Note</div><div class=notice-content>People often wonder why they should learn MIPS over x64 and ARM assembly.</div></div><h2 id=-registers>üëú Registers
<a class=heading-link href=#-registers><i class="fa fa-link" aria-hidden=true></i></a></h2><p>Registers have the following usage conventions:</p><ul><li><p>When a register is designated as <strong>preserved across calls</strong>, it means that the caller can count on the register having the same contents before and after a subprogram call. If the subprogram uses one of these registers, it should take measures to save the register value before changing it and restore the value before returning.</p></li><li><p>If a register is designated as <strong>not preserved across calls</strong>, it means that the caller cannot count on the register having the same contents before and after a subprogram call. Thus the subprogram can use the register freely. If the caller puts a value into one of these registers before a subprogram call and needs the value after the call, then the caller has the responsibility of saving and restoring the value.</p></li><li><p>If a register is designated as <strong>dangerous to use</strong>, it means that the register is used either by the operating system or the assembler. Most programs should avoid the use of these registers.</p></li></ul><table><thead><tr><th>Symbol</th><th>Actual</th><th>Meaning</th><th>Usage Conventions</th></tr></thead><tbody><tr><td><code>$zero</code></td><td><code>$0</code></td><td>Constant Value Zero</td><td>Preserved</td></tr><tr><td><code>$at</code></td><td><code>$1</code></td><td>Assembler&rsquo;s Register</td><td>Preserved</td></tr><tr><td><code>$v0-$v1</code></td><td><code>$2-3</code></td><td>Syscalls & Return Value</td><td>Not Preserved</td></tr><tr><td><code>$a0-$a3</code></td><td><code>$4-7</code></td><td>Arguments</td><td>Not Preserved</td></tr><tr><td><code>$t0-$t7</code></td><td><code>$8-15</code></td><td>Temporaries</td><td>Not Preserved</td></tr><tr><td><code>$s0-$s7</code></td><td><code>$16-23</code></td><td>Saved Values</td><td>Preserved</td></tr><tr><td><code>$t8-$t9</code></td><td><code>$24-25</code></td><td>Temporaries</td><td>Not Preserved</td></tr><tr><td><code>$k0-$k1</code></td><td><code>$26-27</code></td><td>OS Registers</td><td>Dangerous</td></tr><tr><td><code>$gp</code></td><td><code>$28</code></td><td>Global Pointer</td><td>Dangerous</td></tr><tr><td><code>$sp</code></td><td><code>$29</code></td><td>Stack Pointer</td><td>Dangerous</td></tr><tr><td><code>$fp</code></td><td><code>$30</code></td><td>Frame Pointer</td><td>Dangerous</td></tr><tr><td><code>$ra</code></td><td><code>$31</code></td><td>Return Address</td><td>Dangerous</td></tr><tr><td>-</td><td><code>$f0, $f2</code></td><td>FP Return value</td><td>Not Preserved</td></tr><tr><td>-</td><td><code>$f4-$f10</code></td><td>Temporaries</td><td>Not Preserved</td></tr><tr><td>-</td><td><code>$f12, $f14</code></td><td>FP Arguments</td><td>Not Preserved</td></tr><tr><td>-</td><td><code>$f16, $f18</code></td><td>Temporaries</td><td>Not Preserved</td></tr><tr><td>-</td><td><code>$f20-$f30</code></td><td>Saved Values</td><td>Preserved</td></tr></tbody></table><p>Simple programs should use the following registers:</p><ul><li><code>$zero</code> for the constant 0.</li><li><code>$s0 - $s8$</code> for main program variables</li><li><code>$t0 - $t8$</code> for subprogram variables</li><li><code>$a0 - $a3$</code> for subprogram and syscall parameters</li><li><code>$v0, $v1$</code> for subprogram return values and syscall codes and return values</li></ul><h2 id=-instructions>üìù Instructions
<a class=heading-link href=#-instructions><i class="fa fa-link" aria-hidden=true></i></a></h2><table><thead><tr><th>Instruction</th><th>Example</th><th>Meaning</th></tr></thead><tbody><tr><td>Add</td><td><code>add $1, $2, $3</code></td><td><code>$1 = $2 + $3</code></td></tr><tr><td>Subtract</td><td><code>sub $1, $2, $3</code></td><td><code>$1 = $2 - $3</code></td></tr><tr><td>Add Immediate</td><td><code>addi $1, $2, 100</code></td><td><code>$1 = $2 + 100</code></td></tr><tr><td>Add Unsigned</td><td><code>addu $1, $2, $3</code></td><td><code>$1 = $2 + $3</code></td></tr><tr><td>Subtract Unsigned</td><td><code>subu $1, $2, $3</code></td><td><code>$1 = $2 - $3</code></td></tr><tr><td>Add Immediate Unsigned</td><td><code>addiu $1, $2, 100</code></td><td><code>$1 = $2 + 100</code></td></tr><tr><td>Multiply (/wo overflow)</td><td><code>mul $1, $2, $3</code></td><td><code>$1 = $2 * $3</code></td></tr><tr><td>Multiply</td><td><code>mult $2, $3</code></td><td><code>$hi, $low = $2 * $3</code></td></tr><tr><td>(float) Divide</td><td><code>div $2, $3</code></td><td><code>$hi, $low = $2 / $3</code></td></tr><tr><td>(float) Add</td><td><code>add.s $f0, $f1, $f2</code></td><td><code>$f0 := $f1 + $f2</code></td></tr><tr><td>(float) Subtract</td><td><code>sub.s $f0, $f1, $f2</code></td><td><code>$f0 := $f1 - $f2</code></td></tr><tr><td>(float) Multiply</td><td><code>mul.s $f0, $f1, $f2</code></td><td><code>$f0 := $f1 * $f2</code></td></tr><tr><td>(float) Divide</td><td><code>div.s $f0, $f1, $f2</code></td><td><code>$f0 := $f1 / $f2</code></td></tr><tr><td>(float) Abs</td><td><code>abs.s $f0, $f1</code></td><td><code>$f0 := $f1</code></td></tr><tr><td>(float) Negative</td><td><code>neg.s $f0, $f1</code></td><td><code>$f0 := -$f1</code></td></tr></tbody></table><h3 id=logical>Logical
<a class=heading-link href=#logical><i class="fa fa-link" aria-hidden=true></i></a></h3><table><thead><tr><th>Instruction</th><th>Example</th><th>Meaning</th></tr></thead><tbody><tr><td>And</td><td><code>and $1,$2,$3</code></td><td><code>$1 = $2 & $3</code></td></tr><tr><td>Or</td><td><code>or $1,$2,$3</code></td><td><code>$1 = $2 | $3</code></td></tr><tr><td>And Immediate</td><td><code>andi $1,$2,100</code></td><td><code>$1 = $2 & 100</code></td></tr><tr><td>Or Immediate</td><td><code>or $1,$2,100</code></td><td><code>$1 = $2 | 100</code></td></tr><tr><td>Shift Left</td><td><code>sll $1,$2,10</code></td><td><code>$1 = $2 &lt;&lt; 10</code></td></tr><tr><td>Shift Right</td><td><code>srl $1,$2,10</code></td><td><code>$1 = $2 >> 10</code></td></tr></tbody></table><h3 id=data-transfer>Data Transfer
<a class=heading-link href=#data-transfer><i class="fa fa-link" aria-hidden=true></i></a></h3><table><thead><tr><th>Instruction</th><th>Example</th><th>Meaning</th></tr></thead><tbody><tr><td>Load Word</td><td><code>lw $1, 100($2)</code></td><td><code>$1=Memory[$2+100]</code></td></tr><tr><td>store Word</td><td><code>sw $1, 100($2)</code></td><td><code>Memory[$2+100]=$1</code></td></tr><tr><td>Load Upper Immediate</td><td><code>lui $1, 100</code></td><td><code>$1=100x2^16</code></td></tr><tr><td>Load Address</td><td><code>la $1, label</code></td><td><code>$1=Address of label</code></td></tr><tr><td>Load Immediate</td><td><code>li $1, 100</code></td><td><code>$1=100</code></td></tr><tr><td>Move From hi</td><td><code>mfhi $2</code></td><td><code>$2=hi</code></td></tr><tr><td>Move From lo</td><td><code>mflo $2</code></td><td><code>$2=lo</code></td></tr><tr><td>Move</td><td><code>move $1, $2</code></td><td><code>$1=$2</code></td></tr><tr><td>Load Word</td><td><code>l.s $f0, 100($t2)</code></td><td>Load word into <code>$f0</code> from addr <code>$t2+100</code></td></tr><tr><td>Store Word</td><td><code>s.s $f0, 100($t2)</code></td><td>Store word from <code>$f0</code> into addr <code>$t2+100</code></td></tr><tr><td>Move</td><td><code>mov.s $f0, $f2</code></td><td>Move between FP registers</td></tr><tr><td>Move From</td><td><code>mfc1 $t1, $f2</code></td><td>Move from FP registers (no conversion)</td></tr><tr><td>Move to</td><td><code>mtc1 $t1, $f2</code></td><td>Move to FP registers (no conversion)</td></tr><tr><td>Convert to Integer</td><td><code>cvt.w.s $f2, $f4</code></td><td>Convert from single FP to int</td></tr><tr><td>Convert from Integer</td><td><code>cvt.s.w $f2, $f4</code></td><td>Convert from int to single FP</td></tr></tbody></table><h3 id=conditional-branch>Conditional Branch
<a class=heading-link href=#conditional-branch><i class="fa fa-link" aria-hidden=true></i></a></h3><table><thead><tr><th>Instruction</th><th>Example</th><th>Meaning</th></tr></thead><tbody><tr><td>Branch on ==</td><td><code>beq $1,$2,100</code></td><td><code>if true goto PC+4+100</code></td></tr><tr><td>Branch on !=</td><td><code>bne $1,$2,100</code></td><td><code>if true goto PC+4+100</code></td></tr><tr><td>Branch on ></td><td><code>bgt $1,$2,100</code></td><td><code>if true goto PC+4+100</code></td></tr><tr><td>Branch on >=</td><td><code>bge $1,$2,100</code></td><td><code>if true goto PC+4+100</code></td></tr><tr><td>Branch on &lt;</td><td><code>blt $1,$2,100</code></td><td><code>if true goto PC+4+100</code></td></tr><tr><td>Branch on &lt;=</td><td><code>ble $1,$2,100</code></td><td><code>if true goto PC+4+100</code></td></tr><tr><td>Compare ==</td><td><code>c.eq.s $f2, $f4</code></td><td><code>if $f2 == $f4 then code = 1 else code = 0</code></td></tr><tr><td>Compare &lt;=</td><td><code>c.le.s $f2, $f4</code></td><td><code>if $f2 &lt;= $f4 then code = 1 else code = 0</code></td></tr><tr><td>Compare ></td><td><code>c.lt.s $f2, $f4</code></td><td><code>if $f2 &lt; $f4 then code = 1 else code = 0</code></td></tr><tr><td>Branch on 0</td><td><code>bc1f label</code></td><td><code>if code == 0 then jump to label</code></td></tr><tr><td>Branch on 1</td><td><code>bc1t label</code></td><td><code>if code == 1 then jump to label</code></td></tr></tbody></table><h3 id=comparison>Comparison
<a class=heading-link href=#comparison><i class="fa fa-link" aria-hidden=true></i></a></h3><table><thead><tr><th>Instruction</th><th>Example</th><th>Meaning</th></tr></thead><tbody><tr><td>Set on &lt;</td><td><code>slt $1, $2, $3</code></td><td><code>if($2 &lt; $3) $1 = 1; else $1 = 0</code></td></tr><tr><td>Set on &lt; Immediate</td><td><code>slti $1, $2, 100</code></td><td><code>if($2 &lt; 100) $1 = 1; else $1 = 0</code></td></tr></tbody></table><h3 id=unconditional-jump>Unconditional Jump
<a class=heading-link href=#unconditional-jump><i class="fa fa-link" aria-hidden=true></i></a></h3><table><thead><tr><th>Instruction</th><th>Example</th><th>Meaning</th></tr></thead><tbody><tr><td>Jump</td><td><code>j 1000</code></td><td>Go to address 1000</td></tr><tr><td>Jump Register</td><td><code>jr $1</code></td><td>Go to address stored in <code>$1</code></td></tr><tr><td>Jump and Link</td><td><code>jal 1000</code></td><td><code>$ra = PC+4</code> Go to address 1000</td></tr></tbody></table><h3 id=system-calls>System Calls
<a class=heading-link href=#system-calls><i class="fa fa-link" aria-hidden=true></i></a></h3><table><thead><tr><th>Service</th><th>Operation</th><th>v0</th><th>Arguments</th><th>Results</th></tr></thead><tbody><tr><td>print_int</td><td>Print integer number</td><td>1</td><td><code>$a0 = integer printed</code></td><td>None</td></tr><tr><td>print_float</td><td>Print float number</td><td>2</td><td><code>$f12 = float printed</code></td><td>None</td></tr><tr><td>print_double</td><td>Print dobule number</td><td>3</td><td><code>$f12 = double printed</code></td><td>None</td></tr><tr><td>print_string</td><td>Print null-term str</td><td>4</td><td><code>$a0 = addr(str)</code></td><td>None</td></tr><tr><td>read_int</td><td>Read int from user</td><td>5</td><td>None</td><td>Int ($v0)</td></tr><tr><td>read_float</td><td>Read float from user</td><td>6</td><td>None</td><td>Float ($f0)</td></tr><tr><td>read_double</td><td>Read double from user</td><td>7</td><td>None</td><td>Double ($f0)</td></tr><tr><td>read_string</td><td>Same as fgets()</td><td>8</td><td><code>$a0 = addr(str), $a1 = len(str)</code></td><td>None</td></tr><tr><td>sbrk</td><td>Returns a mem block</td><td>9</td><td><code>$a0 = size</code></td><td>Addr ($v0)</td></tr><tr><td>exit</td><td>Stop program</td><td>10</td><td>None</td><td>None</td></tr><tr><td>print_char</td><td>Print character</td><td>11</td><td><code>$a0 = char to be printed</code></td><td>None</td></tr><tr><td>read_char</td><td>Read character > user</td><td>12</td><td>None</td><td>Char ($v0)</td></tr><tr><td>exit2</td><td>Exits /w return code.</td><td>17</td><td><code>$a0 = return code</code></td><td>None</td></tr></tbody></table><h3 id=assembly-directives>Assembly Directives
<a class=heading-link href=#assembly-directives><i class="fa fa-link" aria-hidden=true></i></a></h3><table><thead><tr><th>Directive</th><th>Result</th></tr></thead><tbody><tr><td><code>.word w1, ..., wn</code></td><td>Store n 32-bit values in successive memory words</td></tr><tr><td><code>.half h1, ..., hn</code></td><td>Store n 16-bit values in successive memory words</td></tr><tr><td><code>.byte b1, ..., bn</code></td><td>Store n 8-bit values in successive memory words</td></tr><tr><td><code>.ascii str</code></td><td>Store the ASCII string str in memory</td></tr><tr><td><code>.asciiz str</code></td><td>Store the ASCII string str in memory and null-terminate it</td></tr><tr><td><code>.space n</code></td><td>Leave an empty n-byte region of memory for later use</td></tr><tr><td><code>.align n</code></td><td>Align the next datum on a 2^n byte boundary.</td></tr></tbody></table></div><footer></footer></article></section></div><footer class=footer><section class=container>¬©
2022
Christos Kaltsas
¬∑
Licensed under <a rel=license href=http://creativecommons.org/licenses/by-nd/4.0/>CC BY-ND 4.0</a>
¬∑
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=/js/coder.min.f411a1043e37c7c14dfb03f4d94d60d9ee69cfa413b16d0fd4f28695babb82bb.js integrity="sha256-9BGhBD43x8FN+wP02U1g2e5pz6QTsW0P1PKGlbq7grs="></script></body></html>